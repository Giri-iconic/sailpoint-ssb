<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE Rule PUBLIC "sailpoint.dtd" "sailpoint.dtd">
<Rule language="beanshell" name="JDBC Account Provisioning">
  <Source><![CDATA[
  import java.io.*;
  import java.sql.*;

  String url = "jdbc:postgresql://localhost:5433/postgres"; // table details
  String username = "postgres"; // MySQL credentials
  String password = "postgres";
  String query = "INSERT INTO employees (emp_id,first_name,last_name,full_name,title,department,status) VALUES ('E4','Rakesh','Patel','Rakesh Patel','Senior Developer','Engineering','active');"; // query to be run
  Class.forName("org.postgresql.Driver"); // Driver name
  Connection con = DriverManager.getConnection(url, username, password);
  System.out.println("Connection Established successfully");
  
  String insertQuery = "INSERT INTO employees (emp_id,first_name,last_name,full_name,title,department,status) VALUES (?,?,?,?,?,?,?)";
  PreparedStatement stmt = con.prepareStatement(insertQuery);

  stmt.setString(1,"6");
  stmt.setString(2,"test");
  stmt.setString(3,"test");
  stmt.setString(4,"test");
  stmt.setString(5,"test");
  stmt.setString(6,"test");
  stmt.setString(7,"test");
  
  boolean result = stmt.execute();
  log.error("===================== Custom "+ result);
  return result;
  st.close(); // close statement
  con.close(); // close connection
  System.out.println("Connection Closed....");
  ]]></Source>
</Rule>